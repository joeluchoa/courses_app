<!DOCTYPE html>
<html>
  <head>
    <title>Student Badge - <%= @student.first_name %> <%= @student.last_name %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# We still link to Bootstrap's CSS for its utility classes (like fonts and resets) %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
      /* Page layout for printing */
      @media print {
        @page {
          size: card landscape;
          margin: 0;
        }
        body {
          -webkit-print-color-adjust: exact; /* Ensures colors print in Chrome */
          print-color-adjust: exact; /* Standard */
        }
      }

      /* Basic setup */
      body {
        background-color: #e9ecef; /* A light grey background for the screen view */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      }

      /* Centers the badge on the page for screen viewing */
      .badge-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 1rem;
      }

      /* The badge itself, styled like a plastic ID card and sized for A6 landscape */
      .badge-card {
        width: 200mm;
        height: 120mm;
        background-color: #ffffff;
        border-radius: 12px;
        border: 2px solid rgba(1,1,1,0.1);
        display: flex;
        flex-direction: column;
        overflow: hidden; /* Keeps contents within the rounded corners */
        position: relative; /* For positioning child elements */
      }

      /* Header styling */
      .badge-header {
        color: black;
        padding: 10px 18px;
        border-bottom: 1px solid #eee;
      }
      .badge-logo {
        font-weight: 800;
        font-size: 2.5rem;
        letter-spacing: -1px;
        opacity: 0.8;
        text-align: left;
        vertical-align: top;
      }
      .badge-school-name {
        font-size: 1.2rem;
        text-align: center;
      }

      /* Main content area */
      .badge-body {
        display: flex;
        align-items: center;
        flex-grow: 1; /* Makes this section fill available space */
      }

      .student-details {
        text-align: left;
        padding: 10px;
      }
      .student-name {
        font-size: 2.5rem;
        padding: 2px;
      }
      .student-name span {
        font-weight: 300;
      }
      .student-name strong {
        font-weight: 700;
      }
      .field-label {
        font-size: 1.3rem;
        opacity: 0.7;
        font-weight: 300;
        padding: 2px;
      }
      .field-value {
        font-size: 1.4rem;
        font-weight: 600;
        padding: 2px;
      }

      /* Footer area with QR code */
      .badge-footer {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        padding: 10px 18px;
        border-top: 1px solid #eee;
        font-weight: 300;
      }
      .qr-code-area {
        /* Ddgeefine a fixed size for the QR code's container */
        width: 250px;
        height: 250px;
        padding: 0 10px 0 20px; /* A small inner padding */
        background-color: white;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .qr-code-area .qr-code-container {
        width: 100%;
        height: 100%;
      }

      .qr-code-area .qr-code-container svg {
        /* Make the SVG fill its container without distortion */
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      .issuing-info {
        font-size: 1rem;
        text-align: right;
        opacity: 0.7;
      }
    </style>
  </head>

  <body>
    <%= yield %>
  </body>
</html>
