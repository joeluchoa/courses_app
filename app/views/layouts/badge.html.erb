<!DOCTYPE html>
<html>
  <head>
    <title>Student Badge - <%= @student.first_name %> <%= @student.last_name %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# We still link to Bootstrap's CSS for its utility classes (like fonts and resets) %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
      /* Page layout for printing */
      @media print {
        @page {
          size: A7 landscape;
          margin: 0;
        }
        body {
          -webkit-print-color-adjust: exact; /* Ensures colors print in Chrome */
          print-color-adjust: exact; /* Standard */
        }
      }

      /* Basic setup */
      body {
        background-color: #e9ecef; /* A light grey background for the screen view */
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      }

      /* Centers the badge on the page for screen viewing */
      .badge-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 2rem;
      }

      /* The badge itself, styled like a plastic ID card and sized for A6 landscape */
      .badge-card {
        width: 148mm; /* A6 landscape width */
        height: 105mm; /* A6 landscape height */
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        overflow: hidden; /* Keeps contents within the rounded corners */
        position: relative; /* For positioning child elements */
      }

      /* Header styling */
      .badge-header {
        background: linear-gradient(45deg, #0d6efd, #0dcaf0); /* A nice blue gradient */
        color: white;
        padding: 12px 18px;
        text-align: right;
      }
      .badge-logo {
        font-weight: 700;
        font-size: 1.1rem;
        letter-spacing: 2px;
        opacity: 0.8;
      }
      .badge-school-name {
        font-weight: 400;
        font-size: 0.8rem;
      }

      /* Main content area */
      .badge-body {
        display: flex;
        align-items: center;
        padding: 20px;
        flex-grow: 1; /* Makes this section fill available space */
      }

      /* Placeholder for the student's photo */
      .student-photo-placeholder {
        width: 130px;
        height: 130px;
        border: 2px dashed #adb5bd;
        background-color: #f8f9fa;
        border-radius: 50%; /* Circular photo */
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 25px;
      }
      .student-photo-placeholder span {
        color: #adb5bd;
        font-weight: 600;
        font-size: 1.2rem;
      }

      /* Student's name and ID details */
      .student-details {
        text-align: left;
      }
      .student-name {
        font-size: 2.2rem;
        line-height: 1.1;
        margin-bottom: 10px;
      }
      .student-name span {
        display: block;
        font-weight: 300;
      }
      .student-name strong {
        display: block;
        font-weight: 700;
      }
      .student-id-label {
        font-size: 0.8rem;
        color: #6c757d;
        font-weight: 600;
        letter-spacing: 1px;
      }
      .student-id {
        font-family: 'Courier New', Courier, monospace;
        font-size: 1.5rem;
        font-weight: 600;
      }

      /* Footer area with QR code */
      .badge-footer {
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        padding: 10px 18px;
        border-top: 1px solid #eee;
      }
      .qr-code-area {
        /* Define a fixed size for the QR code's container */
        width: 90px;
        height: 90px;
        padding: 5px; /* A small inner padding */
        background-color: white;
        border: 1px solid #dee2e6;
        border-radius: 4px; /* Slightly rounded corners */
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .qr-code-area .qr-code-container {
        width: 100%;
        height: 100%;
      }

      .qr-code-area .qr-code-container svg {
        /* Make the SVG fill its container without distortion */
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      .issuing-info {
        font-size: 0.7rem;
        color: #adb5bd;
        text-align: right;
      }
    </style>
  </head>

  <body>
    <%# This just renders the content of the badge.html.erb view, nothing else %>
    <%= yield %>
  </body>
</html>
